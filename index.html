<!DOCTYPE html>
<html>
<head>
    <title>Local Voice Command System</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }
        button {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 10px 2px;
            cursor: pointer;
            border-radius: 5px;
        }
        #status {
            margin: 20px;
            padding: 15px;
            border-radius: 5px;
        }
        .listening {
            background-color: #e6f7ff;
            border: 1px solid #b3e0ff;
        }
        .error {
            background-color: #ffebee;
            border: 1px solid #ffcdd2;
        }
    </style>
</head>
<body>
    <h1>Hotel Voice Command System</h1>
    <p>Speak commands after pressing the button</p>
    
    <button id="startBtn">Start Listening</button>
    <button id="stopBtn">Stop Listening</button>
    
    <div id="status">Press "Start Listening" to begin</div>
    
    <h3>Available Commands:</h3>
    <ul style="text-align: left; display: inline-block;">
        <li>"Welcome" - Welcome message</li>
        <li>"Breakfast" - Breakfast information</li>
        <li>"Elevator" - Elevator locations</li>
        <li>"Amenities" - Hotel amenities</li>
        <li>"Stop" - Stop audio</li>
    </ul>

    <script>
        // Simple audio responses (using text-to-speech instead of audio files)
        const responses = {
            'welcome': 'Welcome to our hotel. We are pleased to have you as our guest.',
            'breakfast': 'Breakfast is served from 6:30 AM to 10:00 AM in the main dining area.',
            'elevator': 'Elevators are located near the main lobby and at both ends of the hallway.',
            'amenities': 'We offer free WiFi, a fitness center, swimming pool, and 24-hour room service.',
            'default': 'Sorry, I didn\'t understand that command.'
        };

        const statusDiv = document.getElementById('status');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        let recognition;

        // Check for browser support
        if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
            statusDiv.innerHTML = 'Speech recognition not supported in this browser. Try Chrome or Edge.';
            startBtn.disabled = true;
        } else {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.continuous = true;
            recognition.interimResults = false;
            recognition.lang = 'en-US';

            recognition.onstart = function() {
                statusDiv.textContent = 'Listening... Speak a command now';
                statusDiv.className = 'listening';
            };

            recognition.onresult = function(event) {
                const last = event.results.length - 1;
                const command = event.results[last][0].transcript.toLowerCase().trim();
                
                statusDiv.textContent = `Heard: "${command}"`;
                
                // Simple command matching
                let response;
                if (command.includes('welcome')) {
                    response = responses.welcome;
                } else if (command.includes('breakfast')) {
                    response = responses.breakfast;
                } else if (command.includes('elevator') || command.includes('lift')) {
                    response = responses.elevator;
                } else if (command.includes('amenit')) { // catches "amenity" or "amenities"
                    response = responses.amenities;
                } else if (command.includes('stop')) {
                    // Stop any current speech
                    window.speechSynthesis.cancel();
                    return;
                } else {
                    response = responses.default;
                }
                
                // Speak the response
                const utterance = new SpeechSynthesisUtterance(response);
                window.speechSynthesis.speak(utterance);
            };

            recognition.onerror = function(event) {
                statusDiv.textContent = 'Error: ' + event.error;
                statusDiv.className = 'error';
            };

            recognition.onend = function() {
                if (!recognition.manualStop) {
                    // If not manually stopped, restart listening
                    recognition.start();
                }
            };
        }

        startBtn.addEventListener('click', function() {
            recognition.manualStop = false;
            recognition.start();
        });

        stopBtn.addEventListener('click', function() {
            recognition.manualStop = true;
            recognition.stop();
            statusDiv.textContent = 'Microphone off';
            statusDiv.className = '';
        });
    </script>
</body>
</html>